# 第 1 章 -- 引言


## Catalog
- 第 1 章 -- 引言
    + 1.1 Web 标准: 是敌还是友
        - 1.1.1 标准的指定过程
        - 1.1.2 CSS3, CSS4 以及其他传说
        - 1.1.3 冰与火之歌: 浏览器前缀
    + 1.2 CSS 编码技巧
        - 1.2.1 尽量减少代码重复 
        - 1.2.2 相信你的眼睛, 而不是数字
        - 1.2.3 关于响应式网页设计
        - 1.2.4 合理使用简写
        - 1.2.5 我应该使用预处理器吗?


## New Words
1. 


## Content
### 第 1 章 -- 引言
#### 1.1 Web 标准: 是敌还是友
##### 1.1.1 标准的指定过程
- 与大众的理解大相径庭的是, W3C 并不 "生产" 标准. 实际上, 它扮演的是一个论坛的角色:
  W3C 以工作组的方式, 把某项技术的相关各方聚集起来, 最终由他们来产出标准. 当然,
  W3C 并不只是一个观察者: 它设定了整个平台的规则, 监督整个进程. 但这些技术规范(基本上)
  并不是由 W3C 的工作人员编写完成的.
  
  CSS 规范通常是由 CSS 工作组的成员来编写的. 在编写本书时, CSS工作组共有 98 名成员,
  人员结构如下:
    + 86 名来自 W3C 会员公司的成员(88%)
    + 7 名特邀专家(笔者有幸在列)(7%)
    + 5 名 W3C 工作人员(5%)

  你可能注意到了, 工作组的绝大多数成员(88%)来自 W3C 会员公司. 这些公司(比如浏览器厂商、
  主流网站、 研究机构、 常规技术公司等)都是 Web 标准兴旺发展的直接受益者.
  它们每年的会费也是 W3C 的主要资金来源, 使得 W3C 能够免费、开放地发布所有技术规范,
  而不像其他标准制定组织那样不得不采取收费政策来维持运作.
  
  `特邀专家`是指那些被邀请参与标准制定的 Web 开发者. 在真正获得这样的殊荣之前,
  他们需要证明自己在解决难题时能够持续不断地投入, 在参与讨论时能够体现出深厚的技术背景.

  最后, 同样不可忽视的是 W3C 工作人员. 他们才是真正在 W3C 内工作的人,
  他们为工作组和 W3C 之间的交流提供便利. Web 开发者们普遍存在一个误解,
  以为 W3C 手握标准、 号令天下, 而可怜的浏览器厂商们则唯唯诺诺、莫敢不从.
  这显然不是真相: 对于哪些东西该进入标准, 浏览器厂商比 W3C 有更多的发言权,
  上面列出的人员结构已经证明了这一点.
  
  同样跟大众观念截然相反的是, 制定标准并不是闭门造车. CSS 工作组坚持透明原则,
  它内部所有的交流都是公开的, 并邀请公众的关注和参与.
    + 绝大多数的讨论都发生在工作组的邮件列表中:
      [www-style](http://lists.w3.org/Archives/Public/www-style).
      这个邮件列表是公开存档的, 欢迎任何人的参与.
    + 每周都会召开一次电话会议, 时长一小时. 该会议并不向非工作组成员开放,
      但它会被实时记录在 [W3C 的 IRC 服务器](http://irc.w3.org/) 上的 `#css` 频道.
      这些会议记录会在几天内整理出来, 并发布到邮件列表中.
    + 还有每季度一次的面对面会议, 也会以上述方式进行会议记录. 在获得工作组主席的许可之后,
      这类会议也通常会对观察员开放(以旁听的方式).

  所有这些都是 W3C 进程的一部分, 任何决定都是通过这样的方式来产生的1①. 此外,
  那些真正负责把这些决定写成文字(即编撰规范)的人叫作规范编辑. 规范编辑可能是 W3C 的工作人员、
  浏览器开发者、相关专业的特邀专家； 也可能是会员公司的雇员, 他们全职从事此工作,
  为了共同利益去推进标准.

  每项规范从最初启动到最终成熟, 都会经过以下阶段.
    + (1) 编辑草案 (ED)
    + (2) 首个公开工作草案 (FPWD)
    + (3) 工作草案 (WD)
    + (4) 候选推荐规范 (CR)
    + (5) 提名推荐规范 (PR)
    + (6) 正式推荐规范 (REC): 一项 W3C 技术规范的最终阶段.

  工作组中会有一到两位成员担任主席的角色. 主席负责组织会议、 协调讨论、 控制时间,
  而且要从大局上斡旋整件事情. 担任主席是一件耗时费神的工作, 经常被比作养一大群猫.
  当然, 所有接触过这项工作的人都知道这个比喻并不恰当——养猫比这要容易多了.

##### 1.1.2 CSS3, CSS4 以及其他传说
- 在 CSS 2 之后, 我们将 CSS 打散到多个不同的规范(模块)中, 每个模块都可以独立更新版本.
  这其中那些延续 CSS 2.1 已有特性的模块会升级到 3 这个版本号. 比如以下模块:
    + [CSS 语法](http://w3.org/TR/css-syntax-3)
    + [CSS 层叠与继承](http://w3.org/TR/css-cascade-3)
    + [CSS 颜色](http://w3.org/TR/css3-color)
    + [选择符](http://w3.org/TR/selectors)
    + [CSS 背景与边框](http://w3.org/TR/css3-background)
    + [CSS 值与单位](http://w3.org/TR/css-values-3)
    + [CSS 文本排版](http://w3.org/TR/css-text-3)
    + [CSS 文本装饰效果](http://w3.org/TR/css-text-decor-3)
    + [CSS 字体](http://w3.org/TR/css3-fonts)
    + [CSS 基本 UI 特性](http://w3.org/TR/css3-ui)
  
  此外, 如果某个模块是前所未有的概念, 那它的版本号此将从 1 开始, 比如下面这些:
    + [CSS 变形](http://w3.org/TR/css-transforms-1)
    + [图像混合效果](http://w3.org/TR/compositing-1)
    + [滤镜效果](http://w3.org/TR/filter-effects-1)
    + [CSS 遮罩](http://w3.org/TR/css-masking-1)
    + [CSS 伸缩盒布局](http://w3.org/TR/css-flexbox-1)
    + [CSS 网格布局](http://w3.org/TR/css-grid-1)
  
  **尽管 "CSS3" 这个名词非常流行, 但它实际上并没有在任何规范中定义过.**

##### 1.1.3 冰与火之歌: 浏览器前缀
 

#### 1.2 CSS 编码技巧
##### 1.2.1 尽量减少代码重复
- `DRY` 是 **Don’t Repeat Yourself** 的首字母缩写, 意思是不应该重复你已经做过的事.
  它是一种广为流传的编程理念, 旨在提升代码某方面的可维护性: 在改变某个参数时,
  做到只改尽量少的地方, 最好是一处. 强调 CSS 代码的 DRY 原则是一个贯穿本书的主题.
  DRY 的反面是 `WET`, 它的意思是 We Enjoy Typing(我们喜欢敲键盘) 或
  Write Everything Twice(同样的代码写两次).

  示例代码:
  ```vue
    <template>
        <div id="example-121" class="default-div">
            <h2>1.2.1 尽量减少代码重复</h2>
            <button class="bad-example-btn">Yes!</button>
            <button class="good-example-btn yes">Yes!</button>
            <button class="good-example-btn ok">OK</button>
            <button class="good-example-btn cancel">Cancel</button>
        </div>
    </template>
    <script>
        export default {
            name: 'Example121',
        }
    </script>
    <style scoped>
        button {
            margin: 10px;
        }
        .bad-example-btn {
            padding: 6px 16px;
            border: 1px solid #446d88;
            background: #58a linear-gradient(#77a0bb, #58a);
            border-radius: 4px;
            box-shadow: 0 1px 5px gray;
            color: white;
            text-shadow: 0 -1px 1px #335166;
            font-size: 20px;
            line-height: 30px;
        }
        .good-example-btn {
            /* - 假设父级元素的字体大小是 16px
            *   1em = 16px ==> 1.6px = 0.1em ==> 0.25em = 4px
            *   1px = 0.0625em
            *   10px = 0.625em
            *   20px = 1.25em,
            *   30px = 1.875em
            *
            * - 当前 font-size 根据父元素 16px 换打算后 20px = 125% = 1.25em.
            *   那么从此刻开始, 请牢记下面 class 的 width / height /
            *   border-radius / padding / margin / border-radius ......
            *   都会根据 1em (= 125% = 1.25em) = 20px 来计算, 此时
            *   1px = 0.05em  2px = 0.1em   3px = 0.15em
            *   4px = 0.2em   5px = 0.25em  6px = 0.3em
            *   10px = 0.5em  20px = 1em    30px = 1.5em
            */
            font-size: 125%;
            line-height: 1.5;     /* 30px */
            padding: .3em .8em;
            border-radius: .2em;  /* 4px */
            border: 1px solid #446d88;
            box-shadow: 0 .05em .25em gray;
            text-shadow: 0 -.05em . #335166;
            color: white;
        }
        .yes {
            background: #58a linear-gradient(#77a0bb, #58a);
        }
        .ok {
            background-color: #6b0;
            border: 0;
        }
        .cancel {
            background-color: #c00;
            border: 0;
        }
    </style>
  ```
  详细示例见: `../css-secrets-examples/src/components/1.2.1.vue`

##### 1.2.2 相信你的眼睛, 而不是数字
- 我们的眼睛在看到一个完美垂直居中的物体时, 会感觉它并不居中.实际上, 
  我们应该把这个物体从几何学的中心点再稍微向上挪一点, 才能取得理想的视觉效果.
  来亲身体验一下这件怪事吧(参见 `图 1-9`).

  <img src="./chapter01-images/1-9-10-11-12.png"
    style="margin-left: 0; border-radius: 4px; width: 50%;
        box-shadow: 1px 1px 3px 2px #e5e5e5">
- 与此类似, 在字体设计领域广为人知的是, 圆形的字形(比如 0) 与矩形字形相比,
  需要稍微放大一些, 因为我们倾向于把圆形感知得比其实际尺寸更小一些.
  你也可以在 `图 1-10` 中体验一下.
 
  这些视觉上的错觉在任何形式的视觉设计中都普遍存在, 需要我们有针对性地进行调整.
  一个非常常见的例子是给一个文本容器设置内边距. 不论内容文本有多长,
  是一个单词还是几个段落, 这个问题都会出现.
  假如我们给容器的四边指定相同的内边距, 则实际效果看起来并不相等,
  就像 `图 1-11` 显示的那样. 原因在于, 字母的形状在两端都比较整齐,
  而顶部和底部则往往参差不齐, 从而导致你的眼睛把这些参差不齐的空缺部分感知为多出来的内边距.
  因此, 如果我们希望四边的内边距看起来是基本一致的, 就需要减少顶部和底部的内边距.
  你可以在 `图 1-12` 中看出这种差异.

##### 1.2.3 关于响应式网页设计
- 响应式网页设计(Responsive Web Design, RWD) 在最近几年风靡一时.
  
  比较常见的实践是用多种分辨率来测试一个网站, 然后添加越来越多的媒体查询(Media Query)
  规则来修补网站在这些分辨率下出现的问题. 然而对于今后的 CSS 改动来说,
  每个媒体查询都会增加成本, 而这种成本是不应轻易上升的. 未来每次对 CSS
  代码的修改都要求我们逐一核对这些媒体查询是否需要配合修改,
  甚至可能要求我们反过来修改这些媒体查询的设置. 这一点常常被我们忽略,
  后患无穷. 你添加的媒体查询越多, 你的 CSS代码就会变得越来越经不起折腾.

  这并不是说媒体查询是一种不良实践. 只要用对了, 它就是利器. 但是,
  你只应该把它作为最后的手段. 比如你想把网站做得弹性灵活, 但其他尝试全都失败了;
  或者我们希望在较大或较小的视口下完全改变网站的设计形态(譬如, 把侧栏改成水平布局).
  我这么说的原因在于, ==媒体查询不能以一种连续的方式来修复问题.==
  ==它们的工作原理基于某几个特定的阶梯(亦称 "断点")==,
  如果大部分样式代码并不是以弹性的方式来编写的,
  那么媒体查询能做的只是修补某个特定分辨率下的特定问题.

  当然, 有一点上面并没有提到, 媒体查询的断点不应该由具体的设备来决定,
  而应该根据设计自身来决定. 这不仅是因为我们的网站需要面向的设备太多了
  (尤其是考虑到未来的设备时), 还因为一个网站在桌面端可能会以任意尺寸的窗口来显示.
  如果你有信心自己的设计在任何可能出现的视口尺寸下都能良好工作,
  谁关心这些设备的分辨率具体是多少呢?
 
  遵从“尽量减少代码重复”所描述的原则对此也是有帮助的,
  因为你不需要去覆盖媒体查询里同样数量的声明. 这在本质上减轻了它们所产生的维护成本.

  下面还有一些建议, 可能会帮你避免不必要的媒体查询.
    + (1) 使用百分比长度来取代固定长度. 如果实在做不到这一点,
      也应该尝试使用与视口相关的单位(vw、 vh、 vmin 和 vmax),
      它们的值解析为视口宽度或高度的百分比.
    + (2) 当你需要在较大分辨率下得到固定宽度时, 使用 `max-width` 而不是 `width`,
      因为它可以适应较小的分辨率, 而无需使用媒体查询.
    + (3) 不要忘记为替换元素(比如 `img`、`object`、`video`、`iframe`等)
      设置一个 `max-width`, 值为 `100%`.
    + (4) 假如背景图片需要完整地铺满一个容器, 不管容器的尺寸如何变化,
      `background-size: cover` 这个属性都可以做到. 但是,
      我们也要时刻牢记——带宽并不是无限的, 因此在移动网页中通过 CSS
      把一张大图缩小显示往往是不太明智的.
    + (5) 当图片(或其他元素) 以行列式进行布局时, 让视口的宽度来决定列的数量.
      `弹性盒布局(即 Flexbox)` 或者 `display: inline-block`
      加上常规的文本折行行为, 都可以实现这一点.
    + (6) 在使用多列文本时, 指定 `column-width`(列宽) 而不是指定
      `column-count`(列数), 这样它就可以在较小的屏幕上自动显示为单列布局.
    
  总的来说, 我们的思路是尽最大努力实现弹性可伸缩的布局,
  并在媒体查询的各个断点区间内指定相应的尺寸.

##### 1.2.4 合理使用简写

##### 1.2.5 我应该使用预处理器吗?
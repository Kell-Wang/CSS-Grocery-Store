
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <base href="<%=basePath%>">
    <title>智付集团2017年终会-签到</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
    <link rel="stylesheet" type="text/css" href=" static/css/reset.css">
    <link rel="stylesheet" type="text/css" href=" static/css/global.css">
	<script type="text/javascript" src=" static/js/jquery-1.8.0.js"></script>
	<script type="text/javascript" src=" static/js/utf.js"></script>
	<script type="text/javascript" src=" static/js/jquery.qrcode.js"></script>
	<style type="text/css">

        .middle-qr-code {
            margin:1em auto;
            width:460px; height:460px;
            overflow:hidden;
            background:url(" static/img/QR-code-frame.png") no-repeat center center;
            background-size:cover;
        }
        .middle-qr-code > canvas {
            width:350px; height:350px;
            background:#f2dede;
            display:block; margin:55px auto;
        }

        h1 {
            text-align:center; font-size:94px;
            margin-top:9%;
            letter-spacing:13px;
        }
    </style>
	<script language="JavaScript">
		var i = '${countdown}';//刷新倒计时
		var qrCodeContent = '${qrCodeContent}';
		$(document).ready(function() {
			// 获取屏幕高度 document.documentElement.clientHeight
	        /* var phoneHeight = window.innerHeight;
	        var phonewidth=window.innerWidth;
	        document.getElementsByClassName("index")[0].style.height = phoneHeight + "px"; */
	        
	       /* var stateObject = {};
	    	var title = "智付集团十周年活动-签到";
	    	var newUrl = "/";
	    	history.pushState(stateObject,title,newUrl);  */
			
	    	$("#qrcodeCanvas").qrcode({
				render : "canvas",    //设置渲染方式，有table和canvas，使用canvas方式渲染性能相对来说比较好
				text : qrCodeContent,    //扫描了二维码后的内容
				width : "350",               //二维码的宽度
				height : "350",              //二维码的高度
				background : "#ffffff",       //二维码的后景色
				foreground : "#000000"        //二维码的前景色
			});
	    	refreshSignin();
			
		}); 
		
		/* window.onresize=function(){
	    	var phoneHeight = window.innerHeight;
	        var phonewidth=window.innerWidth;
	        document.getElementsByClassName("index")[0].style.height = phoneHeight + "px";
	    } */
		
		function refreshSignin(){
	        setInterval(go, 1000);
	        function go(){
	            i--;
	            if(i > 0){
	            }else if(i == 0){//设置后台可以开奖
	            	$.ajax({   
	            	    url:'<%=request.getContextPath()%>/annualMeeting/refreshSigninIndex.htm',   
	            	    type:'post', 
	            	    data:'1=1',   
	            	    async : false, //默认为true 异步   
	            	    error:function(){   
	            	    },   
	            	    success:function(data){   
	            	    	i = 20;
	            	    	$("#qrcodeCanvas").html("");
	            	    	var code =  data.replace("\"","").replace("\"","");
	            	    	$("#qrcodeCanvas").qrcode({
	            				render : "canvas",    //设置渲染方式，有table和canvas，使用canvas方式渲染性能相对来说比较好
	            				text : code,    //扫描了二维码后的内容
	            				width : "350",               //二维码的宽度
	            				height : "350",              //二维码的高度
	            				background : "#ffffff",       //二维码的后景色
	            				foreground : "#000000"        //二维码的前景色
	            			});
	            	    }
	            	});
	            }
	        }
	    }
	</script> 
  </head>
  
  <body>
	<div class="wall">
        <!--绝对定位背景大图-->
        <div class="absolute-bg">
            <img src=" static/img/bg.png" alt="">
        </div>

        <!--中部二维码-->
        <h1>智付钱包 扫码签到</h1>
        <div class="middle-qr-code" id="qrcodeCanvas">
            
        </div>
        <!--<h3>用智付钱包APP，扫码签到</h3>-->
    </div>
  </body>
</html>
